# Шаблон Gulp

Лёгкий шаблон для фронтенд-разработки на основе Gulp для создания статических веб-сайтов. Поддерживает Pug или HTML (в зависимости от наличия `index.pug` или `index.html`), SCSS/SASS, Stylus, JavaScript, SVG-спрайты и оптимизацию изображений с сервером разработки и автообновлением.

## Возможности

- **Pug или HTML**: Компиляция всех Pug-файлов в `src/` (например, `index.pug`, `contacts.pug`, `about.pug`) в соответствующие HTML-файлы или копирование `src/index.html`. Шаблоны в `src/pugs/` используются как подключаемые модули и не компилируются отдельно.
- **SCSS/SASS и Stylus**: Обработка и минимизация стилей в `src/styles/`.
- **JavaScript**: Минимизация JS в `src/scripts/` в продакшен-режиме.
- **SVG-спрайты**: Генерация SVG-спрайтов из `src/assets/` с поддержкой CSS.
- **Оптимизация изображений**: Сжатие изображений в `src/images/` в продакшен-режиме.
- **Автообновление**: Автоматическое обновление браузера при изменении файлов.
- **Автоматическое открытие браузера**: Открытие браузера при запуске сервера (в режиме разработки).

## Требования

- [Node.js](https://nodejs.org/) (версия 10 или выше)
- [npm](https://www.npmjs.com/) (версия 6 или выше)

## Установка

1. Клонируйте репозиторий:
   ```bash
   git@github.com:AndrewRemarkov/gulp-template.git
   cd gulp-template
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```

## Использование

Разместите исходные файлы в папке `src/` согласно структуре. Выберите тип шаблонов, создав либо Pug-файлы (`index.pug`, `contacts.pug` и т.д.) в `src/`, либо `index.html + contacts.html и т.д`. Используйте команды:

### Разработка

Запустите сервер разработки с автообновлением и открытием браузера:

```bash
gulp
```

Команда выполняет задачу `gulp dev`, которая:

- Очищает папку `static/`.
- Обрабатывает ресурсы (Pug или HTML, SCSS/SASS, Stylus, JS, SVG, изображения).
- Запускает сервер на `http://localhost:8080`.
- Следит за изменениями и обновляет браузер.

### Сборка для продакшена

Создайте оптимизированные ресурсы:

```bash
gulp build
```

Команда выполняет задачу `gulp build` с `NODE_ENV=production`, которая:

- Очищает папку `static/`.
- Минимизирует CSS, JS и изображения.
- Выводит файлы в `static/`.

### Другие команды

- Запуск сервера:
  ```bash
  npm run server
  ```
- Очистка `static/`:
  ```bash
  npm run clean
  ```

## Структура проекта

```
├── src/                    # Исходные файлы
│   ├── assets/             # SVG-файлы для спрайтов (*.svg)
│   ├── images/             # Изображения (**/*.jpg, **/*.png, **/*.gif, **/*.svg)
│   ├── pugs/               # Подключаемые Pug-шаблоны (**/*.pug, опционально, не компилируются отдельно)
│   ├── scripts/            # JavaScript-файлы (**/*.js)
│   ├── styles/             # Стили (**/*.scss, **/*.sass, **/*.styl, **/*.css)
│   ├── index.pug           # Ключевой Pug-шаблон (если выбран Pug)
│   ├── contacts.pug        # Дополнительный Pug-шаблон (пример)
│   ├── index.html          # Ключевой HTML-файл (если выбран HTML)
│   ├── contacts.html       # Дополнительный HTML-файл (пример)
├── static/                 # Выходная папка (генерируется)
├── gulpfile.js             # Конфигурация Gulp
├── package.json            # Зависимости и скрипты
└── README.md               # Документация
```

## Скрипты

- `npm run dev`: Запускает `gulp dev` для разработки.
- `npm run build`: Запускает `gulp build` с оптимизацией.
- `npm run clean`: Очищает `static/`.
- `npm run server`: Запускает сервер.

## Зависимости

- `gulp`: Таск-раннер.
- `gulp-connect`: Сервер с автообновлением.
- `gulp-pug`, `pug`: Компиляция Pug.
- `gulp-sass`, `sass`: Обработка SCSS/SASS.
- `gulp-stylus`: Обработка Stylus.
- `gulp-uglify`: Минимизация JS.
- `gulp-imagemin`: Оптимизация изображений.
- `gulp-clean-css`: Минимизация CSS.
- `gulp-svg-sprite`: SVG-спрайты.
- `gulp-plumber`: Обработка ошибок.
- `gulp-if`: Условные задачи.
- `gulp-data`: Инъекция данных в Pug.
- `delete`: Очистка директорий.

## Примечания

- Сервер работает на `http://localhost:8080`.
- В продакшен-режиме (`NODE_ENV=production`) ресурсы минимизируются, браузер не открывается.
- Создайте Pug-файлы (`index.pug`, `contacts.pug`, `about.pug` и т.д.) в `src/` для компиляции в соответствующие HTML или `src/index.html` для работы с HTML.
- Файлы в `src/pugs/` используются как подключаемые модули для Pug-шаблонов (через `include` или `extend`) и не компилируются в отдельные HTML.
- Шаблон настроен для Node.js v10+ и npm v6+.

## Устранение неполадок

- **Браузер не открывается?** Проверьте `http://localhost:8080` и консоль. Убедитесь, что команда `start` поддерживается (Windows) или настройте для macOS/Linux.
- **Ошибки зависимостей?** Выполните `npm install` или `npm update`.
- **Файлы не обрабатываются?** Убедитесь, что в `src/` есть `index.pug` или `index.html`, и проверьте пути в `gulpfile.js`.

Для вопросов откройте тикет в [репозитории](git@github.com:AndrewRemarkov/QWERy.git).

## Автор

Андрей Ребека

## Лицензия

ISC License
